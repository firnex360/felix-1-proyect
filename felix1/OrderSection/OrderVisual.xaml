<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:syncfusion="clr-namespace:Syncfusion.Maui.DataGrid;assembly=Syncfusion.Maui.DataGrid"
             x:Class="felix1.OrderSection.OrderVisual"
             BackgroundColor="White"
             Title="OrderVisual">

    <Grid ColumnDefinitions="*,*"
          RowDefinitions="*">

        <!-- LEFT COLUMN with DataGrid + SearchBar -->
        <Grid Grid.Column="0"
              RowDefinitions="*,Auto"
              Margin="20">

            <!-- Full-height DataGrid -->
            <Frame Grid.Row="0"
                   CornerRadius="10"
                   Padding="0"
                   HasShadow="True"
                   BackgroundColor="#F3F3F3"
                   BorderColor="#F5F7FA"
                   VerticalOptions="Fill"
                   HorizontalOptions="Start"
                   MaximumWidthRequest="400">

                <syncfusion:SfDataGrid x:Name="listArticleDataGrid"
                                       ItemsSource="{Binding ListArticles}"
                                       VerticalOptions="Fill"
                                       HorizontalOptions="Fill"
                                       HeaderRowHeight="60"
                                       RowHeight="50"
                                       AutoGenerateColumnsMode="None"
                                       SortingMode="Single"
                                       AllowTriStateSorting="True"
                                       EmptyView="No hay registros"
                                       ColumnWidthMode="Auto">

                    <syncfusion:SfDataGrid.DefaultStyle>
                        <syncfusion:DataGridStyle HeaderRowBackground="#005F8C"
                                                  HeaderRowTextColor="#F3F3F3"
                                                  RowTextColor="#005F8C"
                                                  HeaderRowFontAttributes="Bold"/>
                    </syncfusion:SfDataGrid.DefaultStyle>

                    <syncfusion:SfDataGrid.Columns>
                        <syncfusion:DataGridTextColumn
                            MappingName="Name"
                            HeaderText="Nombre"
                            CellTextAlignment="Start"
                            HeaderTextAlignment="Start"
                            ColumnWidthMode="FitByCell"
                            MaximumWidth="300"/>

                        <syncfusion:DataGridNumericColumn
                            MappingName="PriPrice"
                            HeaderText="Precio"
                            Format="C2"
                            CellTextAlignment="End"
                            HeaderTextAlignment="End"
                            ColumnWidthMode="LastColumnFill"/>
                    </syncfusion:SfDataGrid.Columns>
                </syncfusion:SfDataGrid>
            </Frame>

            <!-- SearchBar BELOW the DataGrid -->
            <Frame Grid.Row="1"
                   BackgroundColor="#F3F3F3"
                   CornerRadius="10"
                   Padding="0"
                   HasShadow="False"
                   VerticalOptions="End"
                   HorizontalOptions="Start"
                   WidthRequest="400"
                   HeightRequest="40"
                   BorderColor="#FFE0E0E0"
                   Margin="0,10,0,0">

                <SearchBar x:Name="searchBar"
                           Placeholder="Buscar artículos..."
                           TextChanged="OnSearchBarTextChanged"
                           TextColor="#22223B"
                           PlaceholderColor="#A0AEC0"
                           BackgroundColor="Transparent"
                           CancelButtonColor="#4F8FCB"
                           FontSize="16"
                           Margin="8,0"
                           HeightRequest="40"
                           HorizontalOptions="Fill"/>
            </Frame>
        </Grid>

        <!-- RIGHT COLUMN -->
        <Grid Grid.Column="1"
              RowDefinitions="*,*"
              Margin="20,20,20,20">

            <!-- Order Items DataGrid -->
            <Frame Grid.Row="0"
                   CornerRadius="10"
                   Padding="0"
                   HasShadow="True"
                   BackgroundColor="#F3F3F3"
                   BorderColor="#F5F7FA"
                   VerticalOptions="Fill"
                   HorizontalOptions="Fill"
                   Margin="0,0,0,10">

                <syncfusion:SfDataGrid x:Name="orderItemsDataGrid"
                                       ItemsSource="{Binding OrderItems}"
                                       VerticalOptions="Fill"
                                       HorizontalOptions="Fill"
                                       HeaderRowHeight="60"
                                       RowHeight="50"
                                       AutoGenerateColumnsMode="None"
                                       SortingMode="Single"
                                       AllowTriStateSorting="True"
                                       EmptyView="No hay artículos en la orden"
                                       ColumnWidthMode="Auto">

                    <syncfusion:SfDataGrid.DefaultStyle>
                        <syncfusion:DataGridStyle HeaderRowBackground="#005F8C"
                                                  HeaderRowTextColor="#F3F3F3"
                                                  RowTextColor="#005F8C"
                                                  HeaderRowFontAttributes="Bold"/>
                    </syncfusion:SfDataGrid.DefaultStyle>

                    <syncfusion:SfDataGrid.Columns>
                        <syncfusion:DataGridNumericColumn
                            MappingName="Quantity"
                            HeaderText="Cantidad"
                            CellTextAlignment="Center"
                            HeaderTextAlignment="Center"
                            ColumnWidthMode="FitByCell"
                            MaximumWidth="100"/>

                        <syncfusion:DataGridTextColumn
                            MappingName="ArticleName"
                            HeaderText="Nombre"
                            CellTextAlignment="Start"
                            HeaderTextAlignment="Start"
                            ColumnWidthMode="FitByCell"
                            MaximumWidth="200"/>

                        <syncfusion:DataGridNumericColumn
                            MappingName="UnitPrice"
                            HeaderText="Precio"
                            Format="C2"
                            CellTextAlignment="End"
                            HeaderTextAlignment="End"
                            ColumnWidthMode="FitByCell"
                            MaximumWidth="100"/>

                        <syncfusion:DataGridNumericColumn
                            MappingName="TotalPrice"
                            HeaderText="Precio Total"
                            Format="C2"
                            CellTextAlignment="End"
                            HeaderTextAlignment="End"
                            ColumnWidthMode="LastColumnFill"/>
                    </syncfusion:SfDataGrid.Columns>
                </syncfusion:SfDataGrid>
            </Frame>

            <Label Text="Row 2 Content"
                   Grid.Row="1"
                   VerticalOptions="Center"
                   HorizontalOptions="Center"/>
        </Grid>
    </Grid>
</ContentPage>
